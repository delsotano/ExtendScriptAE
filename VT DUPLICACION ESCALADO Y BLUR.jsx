app.beginUndoGroup("Escala y Blur");// Variables Típicasvar pro = app.project;var comp = pro.activeItem;// Variables específicasvar misCapas = comp.selectedLayers // esto es un arrayvar miNombre = "_Duplicada";var misCapasDuplicadas=[]; //lo qcreo como array undefinido porque necesito guardar los objetos por separadovar miScalax, miScalay, difAncho, difAlto; // no las defino todavía// comprobación de que hay algo seleccionadoif (misCapas == null){    alert("Selecciona alguna capa");        } else {                    for (var i = 0; i <= (misCapas.length-1); i++) {                                misCapasDuplicadas[i] = misCapas[i].duplicate();                misCapasDuplicadas[i].moveAfter(misCapas[i]);                misCapasDuplicadas[i].name = misCapas[i].name+ miNombre;                misCapasDuplicadas[i].effect.addProperty("ADBE Gaussian Blur");                misCapasDuplicadas[i].effect("Gaussian Blur").property("Blurriness").setValue(6);                              }                              for (var i = 0; i<= misCapasDuplicadas.length-1;i++){                               difAncho = comp.width - misCapasDuplicadas[i].width;                difAlto = comp.height - misCapasDuplicadas[i].height;                               miScalax = (comp.width*misCapasDuplicadas[i].property("Transform").property("Scale").value[0])/misCapasDuplicadas[i].width;                miScalay = (comp.height*misCapasDuplicadas[i].property("Transform").property("Scale").value[1])/misCapasDuplicadas[i].height;                                                miScalax*=comp.pixelAspect; // para evitar las fotos cuadradas                                                if((difAncho>0) && (miScalax > miScalay)){                                        misCapasDuplicadas[i].property("Transform").property("Scale").setValue([miScalax,miScalax]);                                        } else if ((difAncho>0) && (miScalax < miScalay)){                                                misCapasDuplicadas[i].property("Transform").property("Scale").setValue([miScalay,miScalay]);                                                } else if ((difAlto>0) && (miScalax > miScalay)){                                                        misCapasDuplicadas[i].property("Transform").property("Scale").setValue([miScalax,miScalax]);                            } else if ((difAlto>0) && (miScalax < miScalay)){                                misCapasDuplicadas[i].property("Transform").property("Scale").setValue([miScalay,miScalay]);                                                                } else if ((difAncho>0) && (miScalax == miScalay)) {                                    misCapasDuplicadas[i].property("Transform").property("Scale").setValue([miScalax,miScalax]);                                    } else if ((difAlto>0) && (miScalax == miScalay)){                                        misCapasDuplicadas[i].property("Transform").property("Scale").setValue([miScalax,miScalax]);                                        }                                                                                }                                            }app.endUndoGroup();